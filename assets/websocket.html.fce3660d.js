import{_ as n,r as t,o as l,c as d,a as e,b as o,d as c,w as p,e as r}from"./app.9655d571.js";const u={},i=r('<h1 id="websocket" tabindex="-1"><a class="header-anchor" href="#websocket" aria-hidden="true">#</a> WebSocket</h1><h2 id="websocket-stream" tabindex="-1"><a class="header-anchor" href="#websocket-stream" aria-hidden="true">#</a> WebSocket Stream</h2><p>stream.ws</p><blockquote><p><code>acceptProxyProtocol</code>: true | false</p></blockquote><p>仅用于入站，是否接收 Proxy Protocol，默认值为 <code>false</code>。该值为 <code>true</code> 时，底层 TCP 连接建立后，请求方必须先发送 Proxy Protocol，否则连接将被关闭。</p>',5),_={href:"https://www.haproxy.org/download/2.2/doc/proxy-protocol.txt",target:"_blank",rel:"noopener noreferrer"},b=r("<blockquote><p><code>path</code>: string</p></blockquote><p>WebSocket 所使用的 HTTP 协议路径，默认值为 <code>&quot;/&quot;</code>。</p><blockquote><p><code>headers</code>: map {string: string}</p></blockquote><p>自定义 HTTP 头，一个键值对，每个键表示一个 HTTP 头的名称，对应的值是字符串。默认值为空。</p><blockquote><p><code>maxEarlyData</code>: number</p></blockquote><p>所要发送的前置数据的最长长度。用于减少连接建立的时间。 数据会以 Base64 RawURLEncoding 的形式附加在 path 之后，转发时需要根据前缀进行匹配。</p><p>如果设置 <code>earlyDataHeaderName</code> 则会将前置数据放置于该 HTTP 头。</p><p>对于接收端，设置为任何非 0 数值都代表启用前置数据支持。</p><blockquote><p><code>useBrowserForwarding</code>: true | false</p></blockquote><p>是否启用浏览器转发。如果启用浏览器转发，相应的 WebSockets 连接就会经过浏览器转发模块进行转发后再发送至互联网。</p><p>v4.37.0+ 服务器端程序会自动适配客户端的浏览器转发功能，无需额外设置。</p><p>只兼容基于基于路径的前置数据或者 HTTP 头的名字为 &quot;Sec-WebSocket-Protocol&quot; 的启用基于 HTTP 头的前置数据。</p>",12),k=e("blockquote",null,[e("p",null,[e("code",null,"earlyDataHeaderName"),o(": string")])],-1),h=e("p",null,"发送的前置数据的 HTTP 头的名字，设置后启用基于 HTTP 头的前置数据。如果留空则使用基于路径的前置数据。",-1),P=e("p",null,'当且仅当 HTTP 头的名字为 "Sec-WebSocket-Protocol" 时可以启用基于 HTTP 头的前置数据浏览器转发功能。',-1),T=e("div",{class:"custom-container tip"},[e("p",{class:"custom-container-title"},"TIP"),e("p",null,"V2Ray 的 WebSocket 前置数据实现已经完成与其他项目的兼容，正确设置后可以连接其他实现的服务器端。"),e("p",null,"其他项目的客户端可能无法连接 V2Ray 服务器端。")],-1);function m(w,x){const a=t("ExternalLinkIcon"),s=t("RouterLink");return l(),d("div",null,[i,e("p",null,[e("a",_,[o("Proxy Protocol"),c(a)]),o(" 用于传递请求的真实来源 IP 和端口。")]),b,e("p",null,[o("相关配置请参考浏览器转发模块文档。"),c(s,{to:"/v5/config/service/browser.html"},{default:p(()=>[o("service.browser")]),_:1})]),k,h,P,T])}const q=n(u,[["render",m],["__file","websocket.html.vue"]]);export{q as default};
