<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <meta name="generator" content="VuePress 2.0.0-beta.51">
    <style>
      :root {
        --c-bg: #fff;
      }
      html.dark {
        --c-bg: #22272e;
      }
      html, body {
        background-color: var(--c-bg);
      }
    </style>
    <script>
      const userMode = localStorage.getItem('vuepress-color-scheme');
			const systemDarkMode = window.matchMedia && window.matchMedia('(prefers-color-scheme: dark)').matches;
			if (userMode === 'dark' || (userMode !== 'light' && systemDarkMode)) {
				document.documentElement.classList.toggle('dark', true);
			}
    </script>
    <link rel="apple-touch-icon" size="180x180" href="/apple-touch-icon.png"><link rel="icon" type="image/png" size="32x32" href="/favicon-32x32.png"><link rel="icon" type="image/png" size="16x16" href="/favicon-16x16.png"><link rel="manifest" href="/site.webmanifest"><link rel="mask-icon" color="#5bbad5" href="/safari-pinned-tab.svg"><meta name="viewport" content="width=device-width,initial-scale=1.0"><meta name="apple-mobile-web-app-title" content="Project V"><meta name="application-name" content="Project V"><meta name="msapplication-TileColor" content="#da532c"><title>DNS Server | V2Fly.org</title><meta name="description" content="Project V is a collection of tools that can help you build your own basic communication network">
    <link rel="modulepreload" href="/assets/app.b5496439.js"><link rel="modulepreload" href="/assets/dns.html.bc447c74.js"><link rel="modulepreload" href="/assets/dns_flowchart_20210418.c4d2d3a7.js"><link rel="modulepreload" href="/assets/dns.html.e0d24602.js"><link rel="prefetch" href="/assets/index.html.95bbb135.js"><link rel="prefetch" href="/assets/tools.html.0fb4eb42.js"><link rel="prefetch" href="/assets/api.html.6056bbf3.js"><link rel="prefetch" href="/assets/browserforwarder.html.1a96e7ff.js"><link rel="prefetch" href="/assets/dns.html.59e70a35.js"><link rel="prefetch" href="/assets/env.html.b7e70cf6.js"><link rel="prefetch" href="/assets/fakedns.html.3862a780.js"><link rel="prefetch" href="/assets/inbounds.html.b6a06163.js"><link rel="prefetch" href="/assets/multiple_config.html.55ef5ed8.js"><link rel="prefetch" href="/assets/observatory.html.7cafaac5.js"><link rel="prefetch" href="/assets/outbounds.html.e6d3a5b0.js"><link rel="prefetch" href="/assets/overview.html.89fa5f81.js"><link rel="prefetch" href="/assets/policy.html.9ed30abe.js"><link rel="prefetch" href="/assets/reverse.html.7c3ef35c.js"><link rel="prefetch" href="/assets/routing.html.c71dd0b9.js"><link rel="prefetch" href="/assets/stats.html.7ddff95f.js"><link rel="prefetch" href="/assets/transport.html.aa5f760b.js"><link rel="prefetch" href="/assets/index.html.9abefafc.js"><link rel="prefetch" href="/assets/command.html.3586007f.js"><link rel="prefetch" href="/assets/faq.html.59a8a037.js"><link rel="prefetch" href="/assets/help.html.1a629939.js"><link rel="prefetch" href="/assets/install.html.1eb9a5a9.js"><link rel="prefetch" href="/assets/start.html.261a5fe5.js"><link rel="prefetch" href="/assets/workflow.html.e5e8f4b3.js"><link rel="prefetch" href="/assets/blackhole.html.59d479aa.js"><link rel="prefetch" href="/assets/dns.html.7a843964.js"><link rel="prefetch" href="/assets/dokodemo.html.81df66b3.js"><link rel="prefetch" href="/assets/freedom.html.882b320e.js"><link rel="prefetch" href="/assets/http.html.72e9bed8.js"><link rel="prefetch" href="/assets/loopback.html.1cba2549.js"><link rel="prefetch" href="/assets/shadowsocks.html.d144658b.js"><link rel="prefetch" href="/assets/socks.html.2ac587ae.js"><link rel="prefetch" href="/assets/trojan.html.59d9dfd6.js"><link rel="prefetch" href="/assets/vless.html.909a9131.js"><link rel="prefetch" href="/assets/vmess.html.9f4eae95.js"><link rel="prefetch" href="/assets/domainsocket.html.7c05bdc9.js"><link rel="prefetch" href="/assets/grpc.html.071b1521.js"><link rel="prefetch" href="/assets/h2.html.3071271c.js"><link rel="prefetch" href="/assets/mkcp.html.5028eb04.js"><link rel="prefetch" href="/assets/quic.html.1b3c647f.js"><link rel="prefetch" href="/assets/tcp.html.d42d8b55.js"><link rel="prefetch" href="/assets/websocket.html.c201d2ba.js"><link rel="prefetch" href="/assets/compile.html.479113fc.js"><link rel="prefetch" href="/assets/design.html.b84ae773.js"><link rel="prefetch" href="/assets/guide.html.72f2e66d.js"><link rel="prefetch" href="/assets/mkcp.html.377f3f02.js"><link rel="prefetch" href="/assets/muxcool.html.023ae905.js"><link rel="prefetch" href="/assets/vmess.html.94a3c096.js"><link rel="prefetch" href="/assets/tools.html.c3090e53.js"><link rel="prefetch" href="/assets/api.html.3830e788.js"><link rel="prefetch" href="/assets/fakedns.html.18ffe163.js"><link rel="prefetch" href="/assets/outbounds.html.3a870bb0.js"><link rel="prefetch" href="/assets/overview.html.b05f7acb.js"><link rel="prefetch" href="/assets/transport.html.5e902a64.js"><link rel="prefetch" href="/assets/faq.html.ee9b9f52.js"><link rel="prefetch" href="/assets/install.html.654f2a7c.js"><link rel="prefetch" href="/assets/start.html.b24b27f4.js"><link rel="prefetch" href="/assets/workflow.html.97642bcf.js"><link rel="prefetch" href="/assets/dns.html.dcb6cd57.js"><link rel="prefetch" href="/assets/geo.html.21ce3109.js"><link rel="prefetch" href="/assets/inbound.html.d090a21c.js"><link rel="prefetch" href="/assets/outbound.html.b6702aa6.js"><link rel="prefetch" href="/assets/overview.html.a4992b9d.js"><link rel="prefetch" href="/assets/proxy.html.2e092447.js"><link rel="prefetch" href="/assets/router.html.67c4e3db.js"><link rel="prefetch" href="/assets/service.html.79de1c19.js"><link rel="prefetch" href="/assets/stream.html.fa06238d.js"><link rel="prefetch" href="/assets/blackhole.html.9953469f.js"><link rel="prefetch" href="/assets/dns.html.0340b057.js"><link rel="prefetch" href="/assets/dokodemo.html.29230b78.js"><link rel="prefetch" href="/assets/freedom.html.a8c5961b.js"><link rel="prefetch" href="/assets/http.html.b62fc745.js"><link rel="prefetch" href="/assets/compile.html.401c2e28.js"><link rel="prefetch" href="/assets/design.html.ba2595e7.js"><link rel="prefetch" href="/assets/guide.html.a33a8a5b.js"><link rel="prefetch" href="/assets/mkcp.html.dcd43793.js"><link rel="prefetch" href="/assets/vmess.html.c7608945.js"><link rel="prefetch" href="/assets/dns.html.9ae57811.js"><link rel="prefetch" href="/assets/geo.html.b7d62d3b.js"><link rel="prefetch" href="/assets/inbound.html.2a3dcfde.js"><link rel="prefetch" href="/assets/outbound.html.857da111.js"><link rel="prefetch" href="/assets/overview.html.90d45ea2.js"><link rel="prefetch" href="/assets/proxy.html.88343bf9.js"><link rel="prefetch" href="/assets/router.html.2f7a207c.js"><link rel="prefetch" href="/assets/service.html.3e07567e.js"><link rel="prefetch" href="/assets/stream.html.445d237d.js"><link rel="prefetch" href="/assets/blackhole.html.ffcc3b3a.js"><link rel="prefetch" href="/assets/dns.html.9004fe9f.js"><link rel="prefetch" href="/assets/dokodemo.html.87386334.js"><link rel="prefetch" href="/assets/freedom.html.0c734317.js"><link rel="prefetch" href="/assets/http.html.22784859.js"><link rel="prefetch" href="/assets/loopback.html.d75bc410.js"><link rel="prefetch" href="/assets/shadowsocks.html.05acf332.js"><link rel="prefetch" href="/assets/socks.html.d6fc1dfb.js"><link rel="prefetch" href="/assets/trojan.html.bda586b0.js"><link rel="prefetch" href="/assets/vless.html.f0464b45.js"><link rel="prefetch" href="/assets/vlite.html.2481c7cd.js"><link rel="prefetch" href="/assets/vmess.html.27fc14fa.js"><link rel="prefetch" href="/assets/backgroundObservatory.html.613768fd.js"><link rel="prefetch" href="/assets/browser.html.d9c9db4a.js"><link rel="prefetch" href="/assets/burstObservatory.html.718ae2c8.js"><link rel="prefetch" href="/assets/policy.html.f4dbefe0.js"><link rel="prefetch" href="/assets/stats.html.e262e053.js"><link rel="prefetch" href="/assets/grpc.html.256c24b3.js"><link rel="prefetch" href="/assets/kcp.html.a3bc1ce7.js"><link rel="prefetch" href="/assets/quic.html.bd7787c2.js"><link rel="prefetch" href="/assets/tcp.html.5f7e7ba6.js"><link rel="prefetch" href="/assets/websocket.html.246efee3.js"><link rel="prefetch" href="/assets/blackhole.html.724a2cad.js"><link rel="prefetch" href="/assets/dns.html.a882b1a1.js"><link rel="prefetch" href="/assets/dokodemo.html.8a58328a.js"><link rel="prefetch" href="/assets/freedom.html.f8566ed2.js"><link rel="prefetch" href="/assets/http.html.7477d3d1.js"><link rel="prefetch" href="/assets/loopback.html.ff337a4f.js"><link rel="prefetch" href="/assets/shadowsocks.html.66d40aa1.js"><link rel="prefetch" href="/assets/socks.html.fec3c4d9.js"><link rel="prefetch" href="/assets/trojan.html.bf9fe0e3.js"><link rel="prefetch" href="/assets/vless.html.c7b5fb5a.js"><link rel="prefetch" href="/assets/vlite.html.1cfb83d6.js"><link rel="prefetch" href="/assets/vmess.html.3279b3bc.js"><link rel="prefetch" href="/assets/backgroundObservatory.html.050b62fb.js"><link rel="prefetch" href="/assets/browser.html.22e54f34.js"><link rel="prefetch" href="/assets/burstObservatory.html.217bab9f.js"><link rel="prefetch" href="/assets/policy.html.04da7ead.js"><link rel="prefetch" href="/assets/stats.html.2f39b4a2.js"><link rel="prefetch" href="/assets/kcp.html.4fe83651.js"><link rel="prefetch" href="/assets/quic.html.096d7801.js"><link rel="prefetch" href="/assets/tcp.html.25ae95ad.js"><link rel="prefetch" href="/assets/websocket.html.edf87fb4.js"><link rel="prefetch" href="/assets/404.html.c3e557d0.js"><link rel="prefetch" href="/assets/index.html.b324be69.js"><link rel="prefetch" href="/assets/tools.html.12dcf158.js"><link rel="prefetch" href="/assets/api.html.82eff16a.js"><link rel="prefetch" href="/assets/browserforwarder.html.e41d7942.js"><link rel="prefetch" href="/assets/dns.html.f3d4407a.js"><link rel="prefetch" href="/assets/env.html.860a301b.js"><link rel="prefetch" href="/assets/fakedns.html.67fad331.js"><link rel="prefetch" href="/assets/inbounds.html.17bdf6a9.js"><link rel="prefetch" href="/assets/multiple_config.html.1f993f41.js"><link rel="prefetch" href="/assets/observatory.html.e05b44fc.js"><link rel="prefetch" href="/assets/outbounds.html.d5c09809.js"><link rel="prefetch" href="/assets/overview.html.91921548.js"><link rel="prefetch" href="/assets/policy.html.32e63ef6.js"><link rel="prefetch" href="/assets/reverse.html.691a742a.js"><link rel="prefetch" href="/assets/routing.html.4541e7a8.js"><link rel="prefetch" href="/assets/stats.html.ccd23325.js"><link rel="prefetch" href="/assets/transport.html.f18dfa7f.js"><link rel="prefetch" href="/assets/index.html.88509490.js"><link rel="prefetch" href="/assets/command.html.153c2d46.js"><link rel="prefetch" href="/assets/faq.html.4446ae99.js"><link rel="prefetch" href="/assets/help.html.ee020b46.js"><link rel="prefetch" href="/assets/install.html.e8288cb0.js"><link rel="prefetch" href="/assets/start.html.eb403434.js"><link rel="prefetch" href="/assets/workflow.html.c310234b.js"><link rel="prefetch" href="/assets/blackhole.html.2c2951cd.js"><link rel="prefetch" href="/assets/dns.html.74679be6.js"><link rel="prefetch" href="/assets/dokodemo.html.c21e4798.js"><link rel="prefetch" href="/assets/freedom.html.ab824829.js"><link rel="prefetch" href="/assets/http.html.7d0530cf.js"><link rel="prefetch" href="/assets/loopback.html.e099d17e.js"><link rel="prefetch" href="/assets/shadowsocks.html.dac98212.js"><link rel="prefetch" href="/assets/socks.html.e2b7012c.js"><link rel="prefetch" href="/assets/trojan.html.83cb209d.js"><link rel="prefetch" href="/assets/vless.html.eb44d62d.js"><link rel="prefetch" href="/assets/vmess.html.5e31073c.js"><link rel="prefetch" href="/assets/domainsocket.html.adac8112.js"><link rel="prefetch" href="/assets/grpc.html.0fd95807.js"><link rel="prefetch" href="/assets/h2.html.2faacbad.js"><link rel="prefetch" href="/assets/mkcp.html.6858bad3.js"><link rel="prefetch" href="/assets/quic.html.85c0df7f.js"><link rel="prefetch" href="/assets/tcp.html.825c9bc4.js"><link rel="prefetch" href="/assets/websocket.html.978e2703.js"><link rel="prefetch" href="/assets/compile.html.f004b1a0.js"><link rel="prefetch" href="/assets/design.html.94bd4008.js"><link rel="prefetch" href="/assets/guide.html.361da9b1.js"><link rel="prefetch" href="/assets/mkcp.html.b56b4916.js"><link rel="prefetch" href="/assets/muxcool.html.55d1c66e.js"><link rel="prefetch" href="/assets/vmess.html.004d17ae.js"><link rel="prefetch" href="/assets/tools.html.222756c2.js"><link rel="prefetch" href="/assets/api.html.2b016f55.js"><link rel="prefetch" href="/assets/fakedns.html.07e7e3e1.js"><link rel="prefetch" href="/assets/outbounds.html.9226c113.js"><link rel="prefetch" href="/assets/overview.html.f879ae61.js"><link rel="prefetch" href="/assets/transport.html.e3b86fb8.js"><link rel="prefetch" href="/assets/faq.html.eca7bb6e.js"><link rel="prefetch" href="/assets/install.html.0c155dcf.js"><link rel="prefetch" href="/assets/start.html.c666a17e.js"><link rel="prefetch" href="/assets/workflow.html.79b7a786.js"><link rel="prefetch" href="/assets/dns.html.92aa2cc8.js"><link rel="prefetch" href="/assets/geo.html.af6b6f54.js"><link rel="prefetch" href="/assets/inbound.html.ae1cff89.js"><link rel="prefetch" href="/assets/outbound.html.4b5af2a8.js"><link rel="prefetch" href="/assets/overview.html.fdf87812.js"><link rel="prefetch" href="/assets/proxy.html.bfd40646.js"><link rel="prefetch" href="/assets/router.html.d5aceb25.js"><link rel="prefetch" href="/assets/service.html.989ab496.js"><link rel="prefetch" href="/assets/stream.html.ed9097e7.js"><link rel="prefetch" href="/assets/blackhole.html.3e16ddb4.js"><link rel="prefetch" href="/assets/dns.html.e6731870.js"><link rel="prefetch" href="/assets/dokodemo.html.156c12de.js"><link rel="prefetch" href="/assets/freedom.html.0ccee1db.js"><link rel="prefetch" href="/assets/http.html.3f93dcc0.js"><link rel="prefetch" href="/assets/compile.html.942a82d9.js"><link rel="prefetch" href="/assets/design.html.f5be0584.js"><link rel="prefetch" href="/assets/guide.html.0a8ac037.js"><link rel="prefetch" href="/assets/mkcp.html.4ff0290b.js"><link rel="prefetch" href="/assets/vmess.html.7658ebf6.js"><link rel="prefetch" href="/assets/dns.html.6c866183.js"><link rel="prefetch" href="/assets/geo.html.5d8265f4.js"><link rel="prefetch" href="/assets/inbound.html.2ae4a735.js"><link rel="prefetch" href="/assets/outbound.html.0fa8ee75.js"><link rel="prefetch" href="/assets/overview.html.5c2503da.js"><link rel="prefetch" href="/assets/proxy.html.1ed6100a.js"><link rel="prefetch" href="/assets/router.html.386a1d57.js"><link rel="prefetch" href="/assets/service.html.2ff82e11.js"><link rel="prefetch" href="/assets/stream.html.655c214d.js"><link rel="prefetch" href="/assets/blackhole.html.b6f8f316.js"><link rel="prefetch" href="/assets/dns.html.a70540c9.js"><link rel="prefetch" href="/assets/dokodemo.html.a54559d3.js"><link rel="prefetch" href="/assets/freedom.html.b966c1e1.js"><link rel="prefetch" href="/assets/http.html.796819c1.js"><link rel="prefetch" href="/assets/loopback.html.7004a5f7.js"><link rel="prefetch" href="/assets/shadowsocks.html.90d7252d.js"><link rel="prefetch" href="/assets/socks.html.1c75bbb4.js"><link rel="prefetch" href="/assets/trojan.html.a0dfedd4.js"><link rel="prefetch" href="/assets/vless.html.797b3e9b.js"><link rel="prefetch" href="/assets/vlite.html.dfab80d4.js"><link rel="prefetch" href="/assets/vmess.html.da965453.js"><link rel="prefetch" href="/assets/backgroundObservatory.html.36829b00.js"><link rel="prefetch" href="/assets/browser.html.3e68d8ee.js"><link rel="prefetch" href="/assets/burstObservatory.html.fe98f74c.js"><link rel="prefetch" href="/assets/policy.html.a50f7052.js"><link rel="prefetch" href="/assets/stats.html.11ba9aab.js"><link rel="prefetch" href="/assets/grpc.html.1d36851c.js"><link rel="prefetch" href="/assets/kcp.html.451f9d5c.js"><link rel="prefetch" href="/assets/quic.html.0d6a3f6f.js"><link rel="prefetch" href="/assets/tcp.html.1b81b2df.js"><link rel="prefetch" href="/assets/websocket.html.9b640921.js"><link rel="prefetch" href="/assets/blackhole.html.8bc1cec3.js"><link rel="prefetch" href="/assets/dns.html.b53621a6.js"><link rel="prefetch" href="/assets/dokodemo.html.53517362.js"><link rel="prefetch" href="/assets/freedom.html.f7cf30b3.js"><link rel="prefetch" href="/assets/http.html.6f4dde9f.js"><link rel="prefetch" href="/assets/loopback.html.1f2773c8.js"><link rel="prefetch" href="/assets/shadowsocks.html.f121b7d5.js"><link rel="prefetch" href="/assets/socks.html.5b70759e.js"><link rel="prefetch" href="/assets/trojan.html.562344d2.js"><link rel="prefetch" href="/assets/vless.html.fbeb391b.js"><link rel="prefetch" href="/assets/vlite.html.402c3b0a.js"><link rel="prefetch" href="/assets/vmess.html.c2bac809.js"><link rel="prefetch" href="/assets/backgroundObservatory.html.89837bc7.js"><link rel="prefetch" href="/assets/browser.html.57c461f0.js"><link rel="prefetch" href="/assets/burstObservatory.html.adc78bce.js"><link rel="prefetch" href="/assets/policy.html.ce08fe3d.js"><link rel="prefetch" href="/assets/stats.html.8f123f17.js"><link rel="prefetch" href="/assets/kcp.html.872d18e0.js"><link rel="prefetch" href="/assets/quic.html.57594f33.js"><link rel="prefetch" href="/assets/tcp.html.0dfab371.js"><link rel="prefetch" href="/assets/websocket.html.c68d29bb.js"><link rel="prefetch" href="/assets/404.html.be85e18c.js"><link rel="prefetch" href="/assets/Tool.028a7cbb.js"><link rel="prefetch" href="/assets/Uuid.acbd34ce.js">
    <link rel="stylesheet" href="/assets/style.ad5697ba.css">
  </head>
  <body>
    <div id="app"><!--[--><div class="theme-container"><!--[--><header class="navbar"><div class="toggle-sidebar-button" title="toggle sidebar" aria-expanded="false" role="button" tabindex="0"><div class="icon" aria-hidden="true"><span></span><span></span><span></span></div></div><span><a href="/en_US/" class=""><img class="logo" src="/v2ray.png" alt="V2Fly.org"><span class="site-name can-hide">V2Fly.org</span></a></span><div class="navbar-items-wrapper" style=""><!--[--><!--]--><nav class="navbar-items can-hide"><!--[--><div class="navbar-item"><a href="/en_US/guide/start" class="" aria-label="Quick Start"><!--[--><!--]--> Quick Start <!--[--><!--]--></a></div><div class="navbar-item"><a href="/en_US/v5/config/overview" class="" aria-label="Config Reference"><!--[--><!--]--> Config Reference <!--[--><!--]--></a></div><div class="navbar-item"><a href="/en_US/awesome/tools" class="" aria-label="Tools"><!--[--><!--]--> Tools <!--[--><!--]--></a></div><div class="navbar-item"><a href="/en_US/developer/intro/compile" class="" aria-label="Developer Guide"><!--[--><!--]--> Developer Guide <!--[--><!--]--></a></div><div class="navbar-item"><a class="external-link" href="https://guide.v2fly.org/" rel="noopener noreferrer" target="_blank" aria-label="New concise guide"><!--[--><!--]--> New concise guide <span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span><!--[--><!--]--></a></div><div class="navbar-item"><div class="navbar-dropdown-wrapper"><button class="navbar-dropdown-title" type="button" aria-label="选择语言"><span class="title">选择语言</span><span class="arrow down"></span></button><button class="navbar-dropdown-title-mobile" type="button" aria-label="选择语言"><span class="title">选择语言</span><span class="right arrow"></span></button><ul style="display:none;" class="navbar-dropdown"><!--[--><li class="navbar-dropdown-item"><a href="/config/dns.html" class="" aria-label="简体中文"><!--[--><!--]--> 简体中文 <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a aria-current="page" href="/en_US/config/dns.html" class="router-link-active router-link-exact-active router-link-active" aria-label="English"><!--[--><!--]--> English <!--[--><!--]--></a></li><!--]--></ul></div></div><div class="navbar-item"><a class="external-link" href="https://github.com/v2fly" rel="noopener noreferrer" target="_blank" aria-label="GitHub"><!--[--><!--]--> GitHub <span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span><!--[--><!--]--></a></div><!--]--></nav><!--[--><!--]--><button class="toggle-color-mode-button" title="toggle color mode"><svg style="" class="icon" focusable="false" viewBox="0 0 32 32"><path d="M16 12.005a4 4 0 1 1-4 4a4.005 4.005 0 0 1 4-4m0-2a6 6 0 1 0 6 6a6 6 0 0 0-6-6z" fill="currentColor"></path><path d="M5.394 6.813l1.414-1.415l3.506 3.506L8.9 10.318z" fill="currentColor"></path><path d="M2 15.005h5v2H2z" fill="currentColor"></path><path d="M5.394 25.197L8.9 21.691l1.414 1.415l-3.506 3.505z" fill="currentColor"></path><path d="M15 25.005h2v5h-2z" fill="currentColor"></path><path d="M21.687 23.106l1.414-1.415l3.506 3.506l-1.414 1.414z" fill="currentColor"></path><path d="M25 15.005h5v2h-5z" fill="currentColor"></path><path d="M21.687 8.904l3.506-3.506l1.414 1.415l-3.506 3.505z" fill="currentColor"></path><path d="M15 2.005h2v5h-2z" fill="currentColor"></path></svg><svg style="display:none;" class="icon" focusable="false" viewBox="0 0 32 32"><path d="M13.502 5.414a15.075 15.075 0 0 0 11.594 18.194a11.113 11.113 0 0 1-7.975 3.39c-.138 0-.278.005-.418 0a11.094 11.094 0 0 1-3.2-21.584M14.98 3a1.002 1.002 0 0 0-.175.016a13.096 13.096 0 0 0 1.825 25.981c.164.006.328 0 .49 0a13.072 13.072 0 0 0 10.703-5.555a1.01 1.01 0 0 0-.783-1.565A13.08 13.08 0 0 1 15.89 4.38A1.015 1.015 0 0 0 14.98 3z" fill="currentColor"></path></svg></button><div id="docsearch-container"></div></div></header><!--]--><div class="sidebar-mask"></div><!--[--><aside class="sidebar"><nav class="navbar-items"><!--[--><div class="navbar-item"><a href="/en_US/guide/start" class="" aria-label="Quick Start"><!--[--><!--]--> Quick Start <!--[--><!--]--></a></div><div class="navbar-item"><a href="/en_US/v5/config/overview" class="" aria-label="Config Reference"><!--[--><!--]--> Config Reference <!--[--><!--]--></a></div><div class="navbar-item"><a href="/en_US/awesome/tools" class="" aria-label="Tools"><!--[--><!--]--> Tools <!--[--><!--]--></a></div><div class="navbar-item"><a href="/en_US/developer/intro/compile" class="" aria-label="Developer Guide"><!--[--><!--]--> Developer Guide <!--[--><!--]--></a></div><div class="navbar-item"><a class="external-link" href="https://guide.v2fly.org/" rel="noopener noreferrer" target="_blank" aria-label="New concise guide"><!--[--><!--]--> New concise guide <span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span><!--[--><!--]--></a></div><div class="navbar-item"><div class="navbar-dropdown-wrapper"><button class="navbar-dropdown-title" type="button" aria-label="选择语言"><span class="title">选择语言</span><span class="arrow down"></span></button><button class="navbar-dropdown-title-mobile" type="button" aria-label="选择语言"><span class="title">选择语言</span><span class="right arrow"></span></button><ul style="display:none;" class="navbar-dropdown"><!--[--><li class="navbar-dropdown-item"><a href="/config/dns.html" class="" aria-label="简体中文"><!--[--><!--]--> 简体中文 <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a aria-current="page" href="/en_US/config/dns.html" class="router-link-active router-link-exact-active router-link-active" aria-label="English"><!--[--><!--]--> English <!--[--><!--]--></a></li><!--]--></ul></div></div><div class="navbar-item"><a class="external-link" href="https://github.com/v2fly" rel="noopener noreferrer" target="_blank" aria-label="GitHub"><!--[--><!--]--> GitHub <span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span><!--[--><!--]--></a></div><!--]--></nav><!--[--><!--]--><ul class="sidebar-items"><!--[--><li><p tabindex="0" class="sidebar-item sidebar-heading active">Config Reference <!----></p><ul style="" class="sidebar-item-children"><!--[--><li><a href="/en_US/config/overview.html" class="sidebar-item" aria-label="Configuration File Format"><!--[--><!--]--> Configuration File Format <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/en_US/config/dns.html" class="router-link-active router-link-exact-active router-link-active sidebar-item active" aria-label="DNS Server"><!--[--><!--]--> DNS Server <!--[--><!--]--></a><ul style="" class="sidebar-item-children"><!--[--><li><a aria-current="page" href="/en_US/config/dns.html#dns-processing-flow" class="router-link-active router-link-exact-active sidebar-item" aria-label="DNS processing flow"><!--[--><!--]--> DNS processing flow <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/en_US/config/dns.html#dnsobject" class="router-link-active router-link-exact-active sidebar-item" aria-label="DnsObject"><!--[--><!--]--> DnsObject <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/en_US/config/dns.html#serverobject" class="router-link-active router-link-exact-active sidebar-item" aria-label="ServerObject"><!--[--><!--]--> ServerObject <!--[--><!--]--></a><!----></li><!--]--></ul></li><li><a href="/en_US/config/outbounds.html" class="sidebar-item" aria-label="Outbounds"><!--[--><!--]--> Outbounds <!--[--><!--]--></a><!----></li><!--]--></ul></li><li><p tabindex="0" class="sidebar-item sidebar-heading">Protocols <!----></p><ul style="" class="sidebar-item-children"><!--[--><li><a href="/en_US/config/protocols/blackhole.html" class="sidebar-item" aria-label="Blackhole"><!--[--><!--]--> Blackhole <!--[--><!--]--></a><!----></li><li><a href="/en_US/config/protocols/dns.html" class="sidebar-item" aria-label="DNS"><!--[--><!--]--> DNS <!--[--><!--]--></a><!----></li><li><a href="/en_US/config/protocols/dokodemo.html" class="sidebar-item" aria-label="Dokodemo-door"><!--[--><!--]--> Dokodemo-door <!--[--><!--]--></a><!----></li><li><a href="/en_US/config/protocols/freedom.html" class="sidebar-item" aria-label="Freedom"><!--[--><!--]--> Freedom <!--[--><!--]--></a><!----></li><!--]--></ul></li><li><p tabindex="0" class="sidebar-item sidebar-heading">Transport <!----></p><!----></li><!--]--></ul><!--[--><!--]--></aside><!--]--><!--[--><main class="page"><!--[--><!--]--><div class="theme-default-content"><!--[--><!--]--><div><h1 id="dns-server" tabindex="-1"><a class="header-anchor" href="#dns-server" aria-hidden="true">#</a> DNS Server</h1><p>V2Ray has a built-in DNS server, which has two main purposes: matching routing rules according to the IP resolved from a domain, and traditional DNS function—resolving the target address to connect.</p><div class="custom-container tip"><p class="custom-container-title">TIP</p><p>Due to the complexity of DNS protocol, V2Ray only supports basic IP query function (A and AAAA records). In order to have a complete DNS experience, you may want to use an dedicated DNS serverware, such as <a href="https://coredns.io" target="_blank" rel="noopener noreferrer">CoreDNS<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a>, together with V2Ray&#39;s builtin DNS features.</p></div><div class="custom-container warning"><p class="custom-container-title">WARNING</p><p>For <code>outbound</code>s with <code>freedom</code> protocol, the default value of <code>domainStrategy</code> is <code>AsIs</code>, therefore the DNS settings will not be applied to this outbound by default. If necessary, it should be configured as<code>UseIP</code>.</p></div><h2 id="dns-processing-flow" tabindex="-1"><a class="header-anchor" href="#dns-processing-flow" aria-hidden="true">#</a> DNS processing flow</h2><p>When a domain name list assigned by a DNS server matches the domain name currently being queried, V2Ray will use this DNS server first, otherwise, it will query from top to bottom, and only return the IP list which matches expectIPs. The processing flow diagram of the DNS server is as follows:</p><p><img src="/dns_flowchart_20210418.svg" alt=""></p><h2 id="dnsobject" tabindex="-1"><a class="header-anchor" href="#dnsobject" aria-hidden="true">#</a> DnsObject</h2><p><code>DnsObject</code> corresponds to the <code>dns</code> field of the configuration file.</p><div class="language-json ext-json line-numbers-mode"><pre class="language-json"><code><span class="token punctuation">{</span>
    <span class="token property">&quot;hosts&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
        <span class="token property">&quot;baidu.com&quot;</span><span class="token operator">:</span> <span class="token string">&quot;127.0.0.1&quot;</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token property">&quot;servers&quot;</span><span class="token operator">:</span> <span class="token punctuation">[</span>
        <span class="token punctuation">{</span>
            <span class="token property">&quot;address&quot;</span><span class="token operator">:</span> <span class="token string">&quot;1.2.3.4&quot;</span><span class="token punctuation">,</span>
            <span class="token property">&quot;port&quot;</span><span class="token operator">:</span> <span class="token number">5353</span><span class="token punctuation">,</span>
            <span class="token property">&quot;domains&quot;</span><span class="token operator">:</span> <span class="token punctuation">[</span>
                <span class="token string">&quot;domain:v2ray.com&quot;</span>
            <span class="token punctuation">]</span><span class="token punctuation">,</span>
            <span class="token property">&quot;expectIPs&quot;</span><span class="token operator">:</span> <span class="token punctuation">[</span>
                <span class="token string">&quot;geoip:cn&quot;</span>
            <span class="token punctuation">]</span>
        <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token string">&quot;8.8.8.8&quot;</span><span class="token punctuation">,</span>
    <span class="token string">&quot;8.8.4.4&quot;</span><span class="token punctuation">,</span>
    <span class="token string">&quot;localhost&quot;</span>
    <span class="token punctuation">]</span><span class="token punctuation">,</span>
    <span class="token property">&quot;clientIp&quot;</span><span class="token operator">:</span> <span class="token string">&quot;1.2.3.4&quot;</span><span class="token punctuation">,</span>
    <span class="token property">&quot;tag&quot;</span><span class="token operator">:</span> <span class="token string">&quot;dns_inbound&quot;</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><blockquote><p><code>hosts</code>: map{string: address}</p></blockquote><p>Static IP list, its value is a series of &quot;domain name&quot;: &quot;address&quot;. The address can be an IP or domain name. When resolving a domain name, if the domain name matches an item in this list when the address of the item is an IP, the resolution result is the IP of the item, and the following servers are not used for resolution; when the address is a domain name, this domain name will be used for IP resolution instead of the original domain name.</p><p>The domain name format has the following forms:</p><ul><li>Pure string: When this domain name completely matches the target domain name, the rule takes effect. For example, &quot;v2ray.com&quot; matches &quot;v2ray.com&quot; but not &quot;www.v2ray.com&quot;.</li><li>Regular expression: Start with <code>&quot;regexp:&quot;</code>, and the rest is a regular expression. When this regular expression matches the target domain name, the rule takes effect. For example, &quot;regexp:\\.goo.*\\.com$&quot; matches &quot;www.google.com&quot; and &quot;fonts.googleapis.com&quot; but not &quot;google.com&quot;.</li><li>Subdomain (recommended): Start with <code>&quot;domain:&quot;</code>, and the rest part is a domain name. This rule takes effect when the domain name is the target domain name or its subdomain name. For example, &quot;domain:v2ray.com&quot; matches &quot;www.v2ray.com&quot;, &quot;v2ray.com&quot;, but not &quot;xv2ray.com&quot;.</li><li>Substring: Start with <code>&quot;keyword:&quot;</code>, and the rest part is a string. When this string matches any part of the target domain name, the rule takes effect. For example, &quot;keyword:sina.com&quot; can match &quot;sina.com&quot;, &quot;sina.com.cn&quot; and &quot;www.sina.com&quot; but not &quot;sina.cn&quot;.</li><li>List of predefined domain names: Start with <code>&quot;geosite:&quot;</code>, and the rest is a name, such as <code>geosite:google</code> or <code>geosite:cn</code>. For the name and domain name list, please refer to <a href="/en_US/config/routing.html#dlc" class="">Predefined Domain Name List</a>.</li></ul><blockquote><p><code>servers</code>: [string | <a href="#serverobject">ServerObject</a> ]</p></blockquote><p>A list of DNS servers, supporting two types: DNS address (string format) and <a href="#serverobject">ServerObject</a>. When its value is a DNS IP address, such as <code>&quot;8.8.8.8&quot;</code>, V2Ray will use port 53 of this address for DNS query.</p><p>When the value is <code>&quot;localhost&quot;</code>, it means the machine&#39;s preset DNS configuration is used. When the value is in the form of <code>&quot;https://host:port/dns-query&quot;</code>, such as <code>&quot;https://dns.google/dns-query&quot;</code>, V2Ray will use <code>DNS over HTTPS</code> (RFC8484, short for DOH) to query. Some service providers have certificates of IP aliases, then you can write IP format directly, such as <code>https://1.1.1.1/dns-query</code>. You can also use non-standard ports and paths, such as <code>&quot;https://a.b.c.d:8443/my-dns-query&quot;</code> (4.22.0+).</p><p>When the value is in the form of <code>&quot;https+local://host:port/dns-query&quot;</code>, such as <code>&quot;https+local://dns.google/dns-query&quot;</code>, V2Ray will use <code>DOH local mode</code> for queries, that is, DOH requests will not go through Routing/Outbound and other components, but directly request externally to improve timing. Generally suitable for use on the server side. Non-standard ports and paths can also be used. (4.22.0+)</p><div class="custom-container tip"><p class="custom-container-title">TIP</p><p>When using <code>localhost</code>, the DNS request of this machine is not controlled by V2Ray, and additional configuration is needed to make DNS request forwarded by V2Ray.</p><p>The DNS clients initialized by different rules will be reflected in the V2Ray startup log with an <code>info</code> level, such as <code>local DOH</code>, <code>remote DOH</code> and <code>udp</code> and other modes. (4.22.0+)</p></div><blockquote><p><code>clientIp</code>: string</p></blockquote><p>The IP address of the current system. It is used to inform server the client&#39;s location during DNS queries. It cannot be a private address.</p><blockquote><p><code>tag</code>: string</p></blockquote><p>(V2Ray 4.13+) The query traffic sent by this DNS, except <code>localhost</code> and <code>DOHL_</code> modes, will carry this identifier, which can be matched with <code>inboundTag</code> in the routing.</p><h2 id="serverobject" tabindex="-1"><a class="header-anchor" href="#serverobject" aria-hidden="true">#</a> ServerObject</h2><div class="language-json ext-json line-numbers-mode"><pre class="language-json"><code><span class="token punctuation">{</span>
    <span class="token property">&quot;address&quot;</span><span class="token operator">:</span> <span class="token string">&quot;1.2.3.4&quot;</span><span class="token punctuation">,</span>
    <span class="token property">&quot;port&quot;</span><span class="token operator">:</span> <span class="token number">5353</span><span class="token punctuation">,</span>
    <span class="token property">&quot;domains&quot;</span><span class="token operator">:</span> <span class="token punctuation">[</span>
        <span class="token string">&quot;domain:v2ray.com&quot;</span>
    <span class="token punctuation">]</span><span class="token punctuation">,</span>
    <span class="token property">&quot;expectIPs&quot;</span><span class="token operator">:</span> <span class="token punctuation">[</span>
        <span class="token string">&quot;geoip:cn&quot;</span>
    <span class="token punctuation">]</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><blockquote><p><code>address</code>: address</p></blockquote><p>DNS server address, such as <code>&quot;8.8.8.8&quot;</code>. For ordinary DNS IP addresses that only support the UDP protocol DNS server, if the address is in the form of a URL beginning with <code>&quot;https://&quot;</code> or <code>&quot;https+local://&quot;</code>, DOH mode is used, and the rules are the same as DOH configuration in string mode.</p><blockquote><p><code>port</code>: number</p></blockquote><p>DNS server port, such as <code>53</code>. This item defaults to <code>53</code> by default. When using DOH mode, this item is invalid, non-standard port should be specified in URL.</p><blockquote><p><code>domains</code>: [string]</p></blockquote><p>A list of domain names. The domain names contained in this list will be queried by this server first. The domain name format is the same as it in <a href="/en_US/config/routing.html#ruleobject" class="">Routing Configuration</a>.</p><blockquote><p><code>expectIPs</code>:[string]</p></blockquote><p>(V2Ray 4.22.0+) A list of IP ranges, the format is the same as it in <a href="/en_US/config/routing.html#ruleobject" class="">route configuration</a>.</p><p>When this option is configured, V2Ray DNS will verify the returned IP and only return addresses in the expectIPs list.</p><p>If this item is not configured, the IP address will be returned as it is.</p></div><!--[--><!--]--></div><footer class="page-meta"><div class="meta-item edit-link"><a class="external-link meta-item-label" href="https://github.com/v2fly/v2fly-github-io/edit/main/docs/en_US/config/dns.md" rel="noopener noreferrer" target="_blank" aria-label="Edit this page on GitHub"><!--[--><!--]--> Edit this page on GitHub <span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span><!--[--><!--]--></a></div><div class="meta-item last-updated"><span class="meta-item-label">Last Updated: </span><!----></div><div class="meta-item contributors"><span class="meta-item-label">Contributors: </span><span class="meta-item-info"><!--[--><!--[--><span class="contributor" title="email: 22867565+floatingrain@users.noreply.github.com">floatingrain</span><!--[-->, <!--]--><!--]--><!--[--><span class="contributor" title="email: 44045911+kidonng@users.noreply.github.com">Kid</span><!----><!--]--><!--]--></span></div></footer><nav class="page-nav"><p class="inner"><span class="prev"><a href="/en_US/config/overview.html" class="" aria-label="Configuration File Format"><!--[--><!--]--> Configuration File Format <!--[--><!--]--></a></span><span class="next"><a href="/en_US/config/outbounds.html" class="" aria-label="Outbounds"><!--[--><!--]--> Outbounds <!--[--><!--]--></a></span></p></nav><!--[--><!--]--></main><!--]--></div><!----><!--]--></div>
    <script type="module" src="/assets/app.b5496439.js" defer></script>
  </body>
</html>
